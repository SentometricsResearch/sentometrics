<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Optimized and automated sentiment-based sparse regression — sento_model • sentometrics</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Optimized and automated sentiment-based sparse regression — sento_model" />
<meta property="og:description" content="Linear or nonlinear penalized regression of any dependent variable on the wide number of sentiment measures and
potentially other explanatory variables. Either performs a regression given the provided variables at once, or computes
regressions sequentially for a given sample size over a longer time horizon, with associated prediction performance metrics." />
<meta property="og:image" content="https://sentometricsresearch.github.io/sentometrics/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sentometrics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sentometrics.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../articles/examples/corpus.html">Corpus manipulation</a>
    </li>
    <li>
      <a href="../articles/examples/sentiment.html">Sentiment computation</a>
    </li>
    <li>
      <a href="../articles/examples/indexation.html">Index aggregation</a>
    </li>
    <li>
      <a href="../articles/examples/modeling.html">Modeling</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Applications</li>
    <li>
      <a href="../articles/applications/epu.html">Creating EPU indices</a>
    </li>
    <li>
      <a href="../articles/applications/vix.html">Predicting the VIX index</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Contributions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/contributions/gopress.html">Analyzing Gopress data</a>
    </li>
    <li>
      <a href="../articles/contributions/isa.html">Intratextual sentiment analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/development.html">Development</a>
    </li>
    <li>
      <a href="../news/index.html">Releases</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/SentometricsResearch/sentometrics/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Optimized and automated sentiment-based sparse regression</h1>
    <small class="dont-index">Source: <a href='https://github.com/SentometricsResearch/sentometrics/blob/master/R/sentomodel.R'><code>R/sentomodel.R</code></a></small>
    <div class="hidden name"><code>sento_model.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Linear or nonlinear penalized regression of any dependent variable on the wide number of sentiment measures and
potentially other explanatory variables. Either performs a regression given the provided variables at once, or computes
regressions sequentially for a given sample size over a longer time horizon, with associated prediction performance metrics.</p>
    </div>

    <pre class="usage"><span class='fu'>sento_model</span><span class='op'>(</span><span class='va'>sento_measures</span>, <span class='va'>y</span>, x <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>ctr</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>sento_measures</th>
      <td><p>a <code>sento_measures</code> object created using <code><a href='sento_measures.html'>sento_measures</a></code>.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>a one-column <code>data.frame</code> or a <code>numeric</code> vector capturing the dependent (response) variable. In case of
a logistic regression, the response variable is either a <code>factor</code> or a <code>matrix</code> with the factors represented by
the columns as binary indicators, with the second factor level or column as the reference class in case of a binomial
regression. No <code>NA</code> values are allowed.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>a named <code>data.table</code>, <code>data.frame</code> or <code>matrix</code> with other explanatory variables as <code>numeric</code>, by
default set to <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>ctr</th>
      <td><p>output from a <code><a href='ctr_model.html'>ctr_model</a></code> call.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If <code>ctr$do.iter = FALSE</code>, a <code>sento_model</code> object which is a <code>list</code> containing:</p>
<dt>reg</dt><dd><p>optimized regression, i.e., a model-specific <span class="pkg">glmnet</span> object, including for example the estimated
coefficients.</p></dd>
<dt>model</dt><dd><p>the input argument <code>ctr$model</code>, to indicate the type of model estimated.</p></dd>
<dt>alpha</dt><dd><p>calibrated alpha.</p></dd>
<dt>lambda</dt><dd><p>calibrated lambda.</p></dd>
<dt>trained</dt><dd><p>output from <code><a href='https://rdrr.io/pkg/caret/man/train.html'>train</a></code> call (if <code>ctr$type =</code> "<code>cv</code>"). There is no such
output if the control parameters <code>alphas</code> and <code>lambdas</code> both specify one value.</p></dd>
<dt>ic</dt><dd><p>a <code>list</code> composed of two elements: under <code>"criterion"</code>, the type of information criterion used in the
calibration, and under <code>"matrix"</code>, a <code>matrix</code> of all information criterion values for <code>alphas</code> as rows
and the respective lambda values as columns (if <code>ctr$type != </code> "<code>cv</code>"). Any <code>NA</code> value in the latter
element means the specific information criterion could not be computed.</p></dd>
<dt>dates</dt><dd><p>sample reference dates as a two-element <code>character</code> vector, being the earliest and most recent date from
the <code>sento_measures</code> object accounted for in the estimation window.</p></dd>
<dt>nVar</dt><dd><p>a vector of size two, with respectively the number of sentiment measures, and the number of other explanatory
variables inputted.</p></dd>
<dt>discarded</dt><dd><p>a named <code>logical</code> vector of length equal to the number of sentiment measures, in which <code>TRUE</code>
indicates that the particular sentiment measure has not been considered in the regression process. A sentiment measure is
not considered when it is a duplicate of another, or when at least 50% of the observations are equal to zero.</p></dd>

If ctr$do.iter = TRUE, a sento_modelIter object which is a list containing:
<dt>models</dt><dd><p>all sparse regressions, i.e., separate <code>sento_model</code> objects as above, as a <code>list</code> with as names the
dates from the perspective of the sentiment measures at which the out-of-sample predictions are carried out.</p></dd>
<dt>alphas</dt><dd><p>calibrated alphas.</p></dd>
<dt>lambdas</dt><dd><p>calibrated lambdas.</p></dd>
<dt>performance</dt><dd><p>a <code>data.frame</code> with performance-related measures, being "<code>RMSFE</code>" (root mean squared
forecasting error), "<code>MAD</code>" (mean absolute deviation), "<code>MDA</code>" (mean directional accuracy, in which's calculation
zero is considered as a positive; in p.p.), "<code>accuracy</code>" (proportion of correctly predicted classes in case
of a logistic regression; in p.p.), and each's respective individual values in the sample. Directional accuracy
is measured by comparing the change in the realized response with the change in the prediction between two consecutive time
points (omitting the very first prediction as <code>NA</code>). Only the relevant performance statistics are given
depending on the type of regression. Dates are as in the <code>"models"</code> output element, i.e., from the perspective of the
sentiment measures.</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Models are computed using the elastic net regularization as implemented in the <span class="pkg">glmnet</span> package, to account for
the multidimensionality of the sentiment measures. Independent variables are normalized in the regression process, but
coefficients are returned in their original space. For a helpful introduction to <span class="pkg">glmnet</span>, we refer to their
<a href='https://web.stanford.edu/~hastie/glmnet/glmnet_alpha.html#lin'>vignette</a>. The optimal elastic net parameters
<code>lambda</code> and <code>alpha</code> are calibrated either through a to specify information criterion or through
cross-validation (based on the "rolling forecasting origin" principle, using the <code><a href='https://rdrr.io/pkg/caret/man/train.html'>train</a></code> function).
In the latter case, the training metric is automatically set to <code>"RMSE"</code> for a linear model and to <code>"Accuracy"</code>
for a logistic model. We suppress many of the details that can be supplied to the <code><a href='https://glmnet.stanford.edu/reference/glmnet.html'>glmnet</a></code> and
<code><a href='https://rdrr.io/pkg/caret/man/train.html'>train</a></code> functions we rely on, for the sake of user-friendliness.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='ctr_model.html'>ctr_model</a></code>, <code><a href='https://glmnet.stanford.edu/reference/glmnet.html'>glmnet</a></code>, <code><a href='https://rdrr.io/pkg/caret/man/train.html'>train</a></code>, <code><a href='attributions.html'>attributions</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Samuel Borms, Keven Bluteau</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"usnews"</span>, package <span class='op'>=</span> <span class='st'>"sentometrics"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"list_lexicons"</span>, package <span class='op'>=</span> <span class='st'>"sentometrics"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"list_valence_shifters"</span>, package <span class='op'>=</span> <span class='st'>"sentometrics"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"epu"</span>, package <span class='op'>=</span> <span class='st'>"sentometrics"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>505</span><span class='op'>)</span>

<span class='co'># construct a sento_measures object to start with</span>
<span class='va'>corpusAll</span> <span class='op'>&lt;-</span> <span class='fu'><a href='sento_corpus.html'>sento_corpus</a></span><span class='op'>(</span>corpusdf <span class='op'>=</span> <span class='va'>usnews</span><span class='op'>)</span>
<span class='va'>corpus</span> <span class='op'>&lt;-</span> <span class='fu'>quanteda</span><span class='fu'>::</span><span class='fu'><a href='https://quanteda.io/reference/corpus_subset.html'>corpus_subset</a></span><span class='op'>(</span><span class='va'>corpusAll</span>, <span class='va'>date</span> <span class='op'>&gt;=</span> <span class='st'>"2004-01-01"</span><span class='op'>)</span>
<span class='va'>l</span> <span class='op'>&lt;-</span> <span class='fu'><a href='sento_lexicons.html'>sento_lexicons</a></span><span class='op'>(</span><span class='va'>list_lexicons</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"LM_en"</span>, <span class='st'>"HENRY_en"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
<span class='va'>ctr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ctr_agg.html'>ctr_agg</a></span><span class='op'>(</span>howWithin <span class='op'>=</span> <span class='st'>"counts"</span>, howDocs <span class='op'>=</span> <span class='st'>"proportional"</span>,
               howTime <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"equal_weight"</span>, <span class='st'>"linear"</span><span class='op'>)</span>,
               by <span class='op'>=</span> <span class='st'>"month"</span>, lag <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
<span class='va'>sento_measures</span> <span class='op'>&lt;-</span> <span class='fu'><a href='sento_measures.html'>sento_measures</a></span><span class='op'>(</span><span class='va'>corpus</span>, <span class='va'>l</span>, <span class='va'>ctr</span><span class='op'>)</span>

<span class='co'># prepare y and other x variables</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='va'>epu</span><span class='op'>[</span><span class='va'>epu</span><span class='op'>$</span><span class='va'>date</span> <span class='op'>%in%</span> <span class='fu'><a href='get_dates.html'>get_dates</a></span><span class='op'>(</span><span class='va'>sento_measures</span><span class='op'>)</span>, <span class='st'>"index"</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/stats/nobs.html'>nobs</a></span><span class='op'>(</span><span class='va'>sento_measures</span><span class='op'>)</span> <span class='co'># TRUE</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># two other (random) x variables</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"x1"</span>, <span class='st'>"x2"</span><span class='op'>)</span>

<span class='co'># a linear model based on the Akaike information criterion</span>
<span class='va'>ctrIC</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ctr_model.html'>ctr_model</a></span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"gaussian"</span>, type <span class='op'>=</span> <span class='st'>"AIC"</span>, do.iter <span class='op'>=</span> <span class='cn'>FALSE</span>, h <span class='op'>=</span> <span class='fl'>4</span>,
                   do.difference <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>out1</span> <span class='op'>&lt;-</span> <span class='fu'>sento_model</span><span class='op'>(</span><span class='va'>sento_measures</span>, <span class='va'>y</span>, x <span class='op'>=</span> <span class='va'>x</span>, ctr <span class='op'>=</span> <span class='va'>ctrIC</span><span class='op'>)</span>

<span class='co'># attribution and prediction as post-analysis</span>
<span class='va'>attributions1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='attributions.html'>attributions</a></span><span class='op'>(</span><span class='va'>out1</span>, <span class='va'>sento_measures</span>,
                              refDates <span class='op'>=</span> <span class='fu'><a href='get_dates.html'>get_dates</a></span><span class='op'>(</span><span class='va'>sento_measures</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>20</span><span class='op'>:</span><span class='fl'>25</span><span class='op'>]</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>attributions1</span>, <span class='st'>"features"</span><span class='op'>)</span>

<span class='va'>nx</span> <span class='op'>&lt;-</span> <span class='fu'><a href='nmeasures.html'>nmeasures</a></span><span class='op'>(</span><span class='va'>sento_measures</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='va'>newx</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='va'>nx</span><span class='op'>)</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'>data.table</span><span class='fu'>::</span><span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html'>as.data.table</a></span><span class='op'>(</span><span class='va'>sento_measures</span><span class='op'>)</span><span class='op'>[</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>]</span>, <span class='va'>x</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>30</span><span class='op'>:</span><span class='fl'>40</span>, <span class='op'>]</span>
<span class='va'>preds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>out1</span>, newx <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>newx</span><span class='op'>)</span>, type <span class='op'>=</span> <span class='st'>"link"</span><span class='op'>)</span>

<span class='co'># an iterative out-of-sample analysis, parallelized</span>
<span class='va'>ctrIter</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ctr_model.html'>ctr_model</a></span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"gaussian"</span>, type <span class='op'>=</span> <span class='st'>"BIC"</span>, do.iter <span class='op'>=</span> <span class='cn'>TRUE</span>, h <span class='op'>=</span> <span class='fl'>3</span>,
                     oos <span class='op'>=</span> <span class='fl'>2</span>, alphas <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.25</span>, <span class='fl'>0.75</span><span class='op'>)</span>, nSample <span class='op'>=</span> <span class='fl'>75</span>, nCore <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
<span class='va'>out2</span> <span class='op'>&lt;-</span> <span class='fu'>sento_model</span><span class='op'>(</span><span class='va'>sento_measures</span>, <span class='va'>y</span>, x <span class='op'>=</span> <span class='va'>x</span>, ctr <span class='op'>=</span> <span class='va'>ctrIter</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>out2</span><span class='op'>)</span>

<span class='co'># plot predicted vs. realized values</span>
<span class='va'>p</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>out2</span><span class='op'>)</span>
<span class='va'>p</span>

<span class='co'># a cross-validation based model, parallelized</span>
<span class='va'>cl</span> <span class='op'>&lt;-</span> <span class='fu'>parallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/parallel/makeCluster.html'>makeCluster</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span>
<span class='fu'>doParallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/doParallel/man/registerDoParallel.html'>registerDoParallel</a></span><span class='op'>(</span><span class='va'>cl</span><span class='op'>)</span>
<span class='va'>ctrCV</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ctr_model.html'>ctr_model</a></span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"gaussian"</span>, type <span class='op'>=</span> <span class='st'>"cv"</span>, do.iter <span class='op'>=</span> <span class='cn'>FALSE</span>,
                   h <span class='op'>=</span> <span class='fl'>0</span>, alphas <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.10</span>, <span class='fl'>0.50</span>, <span class='fl'>0.90</span><span class='op'>)</span>, trainWindow <span class='op'>=</span> <span class='fl'>70</span>,
                   testWindow <span class='op'>=</span> <span class='fl'>10</span>, oos <span class='op'>=</span> <span class='fl'>0</span>, do.progress <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>out3</span> <span class='op'>&lt;-</span> <span class='fu'>sento_model</span><span class='op'>(</span><span class='va'>sento_measures</span>, <span class='va'>y</span>, x <span class='op'>=</span> <span class='va'>x</span>, ctr <span class='op'>=</span> <span class='va'>ctrCV</span><span class='op'>)</span>
<span class='fu'>parallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/parallel/makeCluster.html'>stopCluster</a></span><span class='op'>(</span><span class='va'>cl</span><span class='op'>)</span>
<span class='fu'>foreach</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/foreach/man/registerDoSEQ.html'>registerDoSEQ</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>out3</span><span class='op'>)</span>

<span class='co'># a cross-validation based model for a binomial target</span>
<span class='va'>yb</span> <span class='op'>&lt;-</span> <span class='va'>epu</span><span class='op'>[</span><span class='va'>epu</span><span class='op'>$</span><span class='va'>date</span> <span class='op'>%in%</span> <span class='fu'><a href='get_dates.html'>get_dates</a></span><span class='op'>(</span><span class='va'>sento_measures</span><span class='op'>)</span>, <span class='st'>"above"</span><span class='op'>]</span>
<span class='va'>ctrCVb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ctr_model.html'>ctr_model</a></span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"binomial"</span>, type <span class='op'>=</span> <span class='st'>"cv"</span>, do.iter <span class='op'>=</span> <span class='cn'>FALSE</span>,
                    h <span class='op'>=</span> <span class='fl'>0</span>, alphas <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.10</span>, <span class='fl'>0.50</span>, <span class='fl'>0.90</span><span class='op'>)</span>, trainWindow <span class='op'>=</span> <span class='fl'>70</span>,
                    testWindow <span class='op'>=</span> <span class='fl'>10</span>, oos <span class='op'>=</span> <span class='fl'>0</span>, do.progress <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>out4</span> <span class='op'>&lt;-</span> <span class='fu'>sento_model</span><span class='op'>(</span><span class='va'>sento_measures</span>, <span class='va'>yb</span>, x <span class='op'>=</span> <span class='va'>x</span>, ctr <span class='op'>=</span> <span class='va'>ctrCVb</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>out4</span><span class='op'>)</span><span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.linkedin.com/in/sam-borms'>Samuel Borms</a>, <a href='https://ardiad.github.io/website'>David Ardia</a>, <a href='https://www.kevenbluteau.com'>Keven Bluteau</a>, <a href='https://linkedin.com/in/krisboudt'>Kris Boudt</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '29d61aa2be101325ab9a82514b58064b',
    indexName: 'sentometrics',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


